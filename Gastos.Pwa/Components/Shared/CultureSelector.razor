@inject BlazorService BlazorService
@inject LocalizationService Loc


<MudTooltip Text="@Loc.Get(RS.Language)">
<MudMenu>
    <ActivatorContent>
        <MudIconButton Icon="@Icons.Material.Filled.Language" aria-label="cambiar idioma" />
    </ActivatorContent>
    <ChildContent>
        @foreach (var kvp in SupportedCultures.Cultures)
        {
            <MudMenuItem Label="@kvp.Value" OnClick="(() => OnCultureChangedAsync(kvp.Key))"
                         Icon="@(kvp.Key == CultureInfo.CurrentCulture.Name ? Icons.Material.Filled.Check : null)" />
        }
    </ChildContent>
</MudMenu>
</MudTooltip>

@code {
    private async Task OnCultureChangedAsync(string culture)
    {
        await BlazorService.SetCultureAsync(culture);
    }
}
